<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像ディザリング変換ツール</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>🎨 画像ディザリング変換</h1>
        
        <div class="color-palette">
            <input type="color" class="color-picker" value="#FFFFFF" title="白">
            <input type="color" class="color-picker" value="#0000FF" title="青">
            <input type="color" class="color-picker" value="#FF0000" title="赤">
            <input type="color" class="color-picker" value="#FFA500" title="オレンジ">
            <input type="color" class="color-picker" value="#FFFF00" title="黄色">
            <input type="color" class="color-picker" value="#008000" title="緑">
        </div>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-text">📁 画像をドラッグ&ドロップ または クリックして選択</div>
            <div style="font-size: 0.9em; opacity: 0.8;">JPG, PNG, GIF対応</div>
            <input type="file" id="fileInput" accept="image/*">
        </div>
        
        <div class="controls">
            <button id="convertBtn" disabled>🔄 ディザリング変換</button>
            <button id="downloadBtn" disabled>💾 変換画像をダウンロード</button>
        </div>

        <div class="resize-controls">
            <label for="resizeWidth">幅:</label>
            <input type="number" id="resizeWidth" value="30" min="1" style="width: 60px;">
            <label for="resizeHeight">高さ:</label>
            <input type="number" id="resizeHeight" value="30" min="1" style="width: 60px;">
        </div>
        
        <div class="progress" id="progress" style="display: none;">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="result-area" id="resultArea" style="display: none;">
            <div class="image-container">
                <h3>元画像</h3>
                <img id="originalImg" alt="元画像">
            </div>
            <div class="image-container">
                <h3>変換後 (<span id="resizeText">30×30</span>)</h3>
                <canvas id="resultCanvas" width="30" height="30"></canvas>
                <div style="margin-top: 10px;">
                    <canvas id="scaledCanvas" width="300" height="300"></canvas>
                    <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">表示用拡大版</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>